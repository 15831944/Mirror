
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <script src="~/JS/jquery-3.3.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="~/JS/vue-resource.js"></script>
    <script src="~/JS/zui-dist/js/zui.js"></script>
    <link href="~/JS/zui-dist/css/zui.css" rel="stylesheet" />
</head>
<body>
    <div id="datagridlist" class="datagrid datagrid-striped">
        <div class="datagrid-container"></div>
        <div class="row bottom-btn-group">
            <div class="col-md-6">

            </div>
            <div class="col-md-6 text-right">
                <div class="pager" data-max-nav-count="8" data-page="144" data-elements="first_icon,prev_icon,nav,next_icon,last_icon,page_of_total_text,total_text,goto"></div>
            </div>

        </div>
    </div>


    <div id="app">
        <table>
            <tr>
                <td>电影名</td>
            </tr>
            <tr>
                <td>
                    {{message}}
                </td>
            </tr>
        </table>
        <input type="button" name="name" value="加载" v-on:click="LoadData" />
        <input type="text" value="123木头人321" />
        <input type="button" name="name" value="测试this" v-on:click="FTest($event)" />

    </div>
    <script>
        function TestF(ele) {
            var $ele = ele.currentTarget;
            alert($ele.val());

        }

        var searchdata =  {
            PageIndex: 1, PageSize: 10
        };

        var vm = new Vue({
            el: '#app',
            data: {
                searchdata: searchdata,
                message: "Aaron!",
                movieData: []
            },
            methods: {
                FTest: function (ele) {
                    var $ele = $(ele.target);  //获取当前点击对象
                    var input = $ele.prev();
                    alert(input.val());
                },
                LoadData: function () {
                    //new $.zui.Messager("请选择代理商级别！", {
                    //    type: 'warning',
                    //    icon: 'bell', // 定义消息图标
                    //    close: false, // 禁用关闭按钮
                    //    time: 3000
                    //}).show();
                    //return;


                    //这个this 被vue接管了,而且data好像也要_data才行
                    this.$http.post('/Movie/LoadMovies', { search: this.searchdata }).
                        then(function (res) {
                            var resmessage = res.body;
                            var obj = JSON.parse(resmessage);
                            this.movieData = obj.Msg;
                        }).catch(function (error) {
                            console.log(error);
                        });
                }
            }
            //这个template如果使用,会把元素中的东西都替换掉 ,但是可以用来做模板绑定  用单独的一个js管理
            //template: '<h1>Hello,Vue.js 2{{message}}</h1>'
        })
        $(function () {
            //$('#datagridlist').datagrid({
            //    dataSource: {
            //        cols: [
            //            { name: 'ExpressName', label: '快递公司', width: 0.2 },
            //            { name: 'Code', label: '快递代码', width: 0.2 },
            //            { name: 'Create_Time', label: '创建时间', width: 0.2 },
            //            { name: 'Operation', label: '操作', width: 0.2 }
            //        ],
            //        remote: function (param) {
            //            this.Search.Page = param.page;
            //            return {
            //                // 原创请求地址
            //                url: '/Express/GetExpressPager',
            //                // 请求类型
            //                type: 'POST',
            //                // 数据类型
            //                dataType: 'json',
            //                //查询条件
            //                data: this.Search
            //            };
            //        },
            //        remoteConverter: function (responseData, textStatus, jqXHR, datagrid) {
            //            $.each(responseData.Data.data, function (index, item) {
            //                item.Operation = '<a href="javascript:void(0)" onclick="vueMethods.ToEdit(' + item.ID + ')" style="padding: 0 10px;"><i class="icon icon-pencil btnb" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="编辑" style="display: inline-block;"></i></a>';
            //                item.Operation += '<a href="javascript:void(0)" onclick="vueMethods.ToDel(' + item.ID + ')" style="padding: 0 10px;"><i class="icon icon-trash btnsc" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="删除" style="display: inline-block;"></i></a>';

            //            })
            //            if (responseData.Data.data.length == 0) {
            //                $("#datagridlist").hide();
            //                $("#nodata").show();
            //            }
            //            else {
            //                $("#datagridlist").show();
            //                $("#nodata").hide();
            //            }
            //            // 转换格式
            //            return responseData.Data;
            //        }
            //    },
            //    configs: {
            //        C4: {
            //            html: true
            //        }
            //    },
            //    states: {
            //        pager: { page: 1, recPerPage: 10 },
            //    },
            //    showRowIndex: false,//显示行数
            //    checkable: false,// 启用勾选
            //    height: 'page' //实现自动调整数据表格高度为当前页所有行的高度
            //});

        })
    </script>

</body>
</html>
